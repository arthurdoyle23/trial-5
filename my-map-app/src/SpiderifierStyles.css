/* SpiderifierStyles.css - Updated with modern, professional design */

/* Container for spiderfied markers */
.mapboxgl-spiderifier-marker-container {
  position: absolute;
  z-index: 10;
}

/* Make sure hover layer appears on top */
.mapboxgl-canvas-container .mapboxgl-layer:last-child {
  z-index: 2;
}

/* Styling for custom pins */
.spider-point-circle {
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.spider-point-circle:hover {
  transform: scale(1.1);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
}

/* Styling for spiderifier markers */
.mapboxgl-spiderifier-marker {
  background-color: #e51f30;
  border: 2px solid white;
  border-radius: 50%;
  width: 12px;
  height: 12px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Animation for hover effects */
.mapboxgl-spiderifier-marker:hover {
  transform: scale(1.2);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
}

/* Styling for connecting lines */
path.mapboxgl-spiderifier-leg-line {
  stroke: rgba(229, 31, 48, 0.6) !important;
  stroke-width: 2 !important;
  stroke-opacity: 0.8 !important;
  fill: none !important;
  stroke-dasharray: none !important;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1)) !important;
  transition: stroke-width 0.2s ease, stroke-opacity 0.2s ease !important;
}

path.mapboxgl-spiderifier-leg-line:hover {
  stroke-width: 3 !important;
  stroke-opacity: 1 !important;
}

/* Make sure spiderfied markers are visible */
.mapboxgl-spiderifier-marker-container {
  z-index: 9;
}

/* Ensure all spider popups appear above markers */
.mapboxgl-popup {
  z-index: 10 !important;
}

/* FIX: Cluster styling - revert to yellow with black */
.cluster-icon {
  background-color: #FFBF00;
  border: 2px solid black;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

/* Animation for the hover effect - subtle movement */
@keyframes icon-shift {
  from { transform: translateY(0px); }
  to { transform: translateY(-2px); }
}

/* Apply animation to hovered layer */
.mapboxgl-canvas-container .mapboxgl-layer:last-child {
  z-index: 2;
  transition: transform 0.1s ease-out;
}

/* CONSISTENT POPUP STYLING FOR BOTH STATIC AND SPIDERFIED POINTS */

/* Base popup styling */
.mapboxgl-popup-content {
  padding: 0 !important; /* Remove default padding */
  border-radius: 8px !important;
  overflow: hidden !important;
  background-color: transparent !important; /* This fixes the square opacity issue */
  box-shadow: none !important; /* Remove default shadow */
}

/* Close button */
.mapboxgl-popup-close-button {
  font-size: 18px !important;
  color: #999 !important;
  padding: 8px !important;
  background: rgba(255, 255, 255, 0.8) !important;
  border: none !important;
  border-radius: 50% !important;
  cursor: pointer !important;
  top: 5px !important;
  right: 5px !important;
  z-index: 5 !important;
  width: 24px !important;
  height: 24px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  line-height: 1 !important;
}

.mapboxgl-popup-close-button:hover {
  color: #333 !important;
  background: rgba(255, 255, 255, 1) !important;
}

/* Tip styling */
.mapboxgl-popup-tip {
  display: none !important; /* Hide the default tip */
}

/* Consistent font-family for all text */
* {
  font-family: "Segoe UI", Roboto, -apple-system, BlinkMacSystemFont, Arial, sans-serif !important;
}

/* Feature popup vs hover popup differentiation */
.feature-popup .mapboxgl-popup-content {
  /* No specific styling needed - createPopupHTML handles the content */
}

.hover-popup .mapboxgl-popup-content {
  /* No specific styling needed - createPopupHTML handles the content */
}

/* Make sure popup container has correct styling */
.popup-container {
  /* Styles will be applied directly in createPopupHTML */
}

/* NEW: Spiderfied popup positioning adjustments */
.mapboxgl-spiderifier-marker-container .mapboxgl-popup {
  margin-top: -30px !important; /* Move popup closer to icon */
}

/* NEW: Enhanced styling for spiderfied icons */
.mapboxgl-spiderifier-marker-container .spider-leg-container {
  transition: transform 0.2s ease-out !important;
}

.mapboxgl-spiderifier-marker-container .spider-leg-container:hover {
  transform: scale(1.1) !important;
  z-index: 11 !important; /* Ensure hovered icon appears on top */
}

/* NEW: Styling for the spiderfied icon pin */
.spider-leg-pin-container {
  transition: transform 0.2s ease !important;
}

.spider-leg-pin-container:hover {
  transform: scale(1.1) !important;
}